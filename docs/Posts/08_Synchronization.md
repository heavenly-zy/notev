---
title: Synchronization
date: 2019-03-26
categories:
   - Discovery
tags:
   - OS
---

## 1 什么是同步？

什么是时间上的同步？根据相对论我们可以知道，两个事件的“同时”发生是相对的，当然，那已经到了极致微观的层次了，一般来说我们并不会考虑到这种情况，那么对于计算机来说什么又是同时呢？

我们知道 CPU 同时只能执行一个操作，但是它执行的速度非常快，当它在分时系统上运行多个进程的时候，我们甚至完全看不出来他们是顺序执行的而不是并行的，这就是并发，利用 CPU 在多个进程之间连续切换以达到各个进程“同时”运行的效果

我们知道进程的开销很大，但是我们却也需要多个进程带来的并发量，线程应运而生，它作为轻量的运算调度单位，可以在一个进程内并发执行，我们可以很容易地通过类库来使用多线程，当然，由于该进程分配到的时间是一定的，这使得多线程并没有多进程并发性高

上面提到的线程只是用户级线程，事实上我们大多操作系统内核支持线程，这样线程就可以获得自己的时间片，获得更高的并发量

## 2 同步所带来的问题

无论是多进程还是多线程，都会有同步问题，当它们“同时”访问临界资源的时候，就会产生各种各样的问题，为了解决这个问题，我们可以使用反复询问临界资源是否可访问的方式来避免冲突，但是这很明显会浪费 CPU 空等的资源，所以我们可以信号量机制来保证“让权等待”原则，这有点像多线程协作与协程协作的关系，多线程协作时难免要轮询另一个线程的情况，白白浪费了大量资源，但协程使用一个线程在多个任务间进行切换，对阻塞进行了有效的规避，大大提高了 CPU 的利用率
